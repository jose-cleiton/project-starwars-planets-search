(this["webpackJsonpsd-0x-project-react-context-hooks-starwars-datatable-filters"]=this["webpackJsonpsd-0x-project-react-context-hooks-starwars-datatable-filters"]||[]).push([[0],{10:function(e,t,a){e.exports=a(16)},16:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(8),c=a.n(r),u=a(1),o=a(6),i=a.n(o),m=a(9),s=a(2),f=Object(n.createContext)(null),d=function(e){var t=e.children,a=Object(n.useState)([]),r=Object(s.a)(a,2),c=r[0],u=r[1],o=Object(n.useState)([]),d=Object(s.a)(o,2),b=d[0],E=d[1],p=Object(n.useState)([]),h=Object(s.a)(p,2),v=h[0],j=h[1],N=Object(n.useState)({column:"",comparison:"",value:0}),O=Object(s.a)(N,2),y=O[0],x=O[1],g=Object(n.useState)({filterByName:{name:""},filterByNumericValues:[],order:{column:"population",sort:"ASC"}}),k=Object(s.a)(g,2),C=k[0],w=k[1],F=Object(n.useState)(["population","orbital_period","diameter","rotation_period","surface_water"]),B=Object(s.a)(F,2),V=B[0],S=B[1],R=function(){var e=Object(m.a)(i.a.mark((function e(){var t,a,n,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://swapi-trybe.herokuapp.com/api/planets/?format=json");case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,n=a.results,l=n.filter((function(e){return delete e.residents})),E(l),u(l);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){R()}),[]);var D={data:c,planetasFiltrados:b,condicoes:v,selected:y,filters:C,columns:V,setColumns:S,setPlanetasFiltrados:E,setCondicoes:j,setSelected:x,setFilters:w};return l.a.createElement(f.Provider,{value:D},t)},b=function(){var e=Object(n.useContext)(f).setFilters;return l.a.createElement("div",{className:"d-flex justify-content-center  "},l.a.createElement("section",null,l.a.createElement("div",null,l.a.createElement("h3",null,"Projeto Star Wars")),l.a.createElement("div",null,l.a.createElement("input",{className:"form-control text-white-50 bg-dark",type:"text","data-testid":"name-filter",onChange:function(t){var a=t.target.value;return e((function(e){return Object(u.a)(Object(u.a)({},e),{},{filterByName:{name:a}})}))}}))))},E=a(5),p=function(){var e=Object(n.useContext)(f),t=e.data,a=e.selected,r=e.filters,c=e.setPlanetasFiltrados,o=e.setSelected,i=e.setFilters,m=e.columns,d=e.setColumns,b=Object(n.useState)([]),p=Object(s.a)(b,2),h=p[0],v=p[1];Object(n.useEffect)((function(){return c(t.filter((function(e){return e.name.toUpperCase().includes(r.filterByName.name.toUpperCase())})))}),[t,r,c]);return Object(n.useEffect)((function(){!function(){var e=t;r.filterByNumericValues.forEach((function(t){switch(t.comparison){case"maior que":e=e.filter((function(e){return Number(e[t.column])>Number(t.value)}));break;case"menor que":e=e.filter((function(e){return Number(e[t.column])<Number(t.value)}));break;case"igual a":e=e.filter((function(e){return Number(e[t.column])===Number(t.value)}))}c(e)}))}()}),[r.filterByNumericValues]),Object(n.useEffect)((function(){var e=r.filterByNumericValues.map((function(e){return e.column}));o({column:m.filter((function(e){return!h.includes(e)}))[0],comparison:"maior que",value:"0"}),v(e)}),[r.filterByNumericValues]),l.a.createElement("div",{className:"filtros d-flex flex-row justify-content-center align-items-end "},l.a.createElement("label",{htmlFor:"column-filter"},"Coluna",l.a.createElement("select",{className:"form-select text-white-50 bg-dark","data-testid":"column-filter",onChange:function(e){return o(Object(u.a)(Object(u.a)({},a),{},{column:e.target.value}))}},m.filter((function(e){return!h.includes(e)})).map((function(e,t){return l.a.createElement("option",{key:t,value:e},e)})))),l.a.createElement("label",{htmlFor:"comparison-filter"},"Operador",l.a.createElement("select",{className:"form-select ms-1 text-white-50 bg-dark","data-testid":"comparison-filter",name:"comparison",onChange:function(e){return o(Object(u.a)(Object(u.a)({},a),{},{comparison:e.target.value}))}},["maior que","menor que","igual a"].map((function(e,t){return l.a.createElement("option",{key:t},e)})))),l.a.createElement("label",{htmlFor:"value-filter ",className:"ms-1"},l.a.createElement("input",{className:"form-control ms-1 text-white-50 bg-dark","data-testid":"value-filter",type:"number",defaultValue:"0",onChange:function(e){return o(Object(u.a)(Object(u.a)({},a),{},{value:e.target.value}))}})),l.a.createElement("div",{className:"ms-2"},l.a.createElement("button",{className:"btn btn-warning",type:"button","data-testid":"button-filter",onClick:function(){i((function(e){return Object(u.a)(Object(u.a)({},e),{},{filterByNumericValues:[].concat(Object(E.a)(e.filterByNumericValues),[a])})})),d(m.filter((function(e){return e!==a.column}))),o({column:"population",comparison:"maior que",value:"0"})}},"Filtrar"),l.a.createElement("button",{className:"btn btn-danger  ms-2","data-testid":"button-remove-filters",type:"submit",onClick:function(){i((function(e){return Object(u.a)(Object(u.a)({},e),{},{filterByNumericValues:[]})})),d(["population","orbital_period","diameter","rotation_period","surface_water"])}},"REMOVER FILTROS")))},h=function(){var e=Object(n.useContext)(f).columns;return l.a.createElement("div",{className:"filtros d-flex flex-row justify-content-center align-items-end "},l.a.createElement("div",null,l.a.createElement("label",{htmlFor:"column-filter"},"Coluna",l.a.createElement("select",{className:"form-select text-white-50 bg-dark"},e.map((function(e,t){return l.a.createElement("option",{key:t,value:e},e)}))))),l.a.createElement("div",{className:"form-check "},l.a.createElement("label",{className:"form-check-label ms-1 ",htmlFor:"flexRadioDefault1"},"Ascendente",l.a.createElement("input",{className:"form-check-input ",type:"radio",name:"flexRadioDefault",id:"flexRadioDefault1"}))),l.a.createElement("div",{className:"form-check"},l.a.createElement("label",{className:"form-check-label ms-1",htmlFor:"flexRadioDefault2"},"Descendente",l.a.createElement("input",{className:"form-check-input ",type:"radio",name:"flexRadioDefault",id:"flexRadioDefault2"}))),l.a.createElement("button",{className:"btn btn-warning ms-2",type:"button","data-testid":"column-sort-button"},"Ordenar"))};var v=function(){var e=Object(n.useContext)(f),t=e.filters,a=e.setFilters,r=e.columns,c=e.setColumns;return l.a.createElement("div",null,t.filterByNumericValues.map((function(e,n){return l.a.createElement("label",{htmlFor:"filter",key:n,"data-testid":"filter",className:"d-flex align-items-center alert  "},"".concat(e.column," ").concat(e.comparison," ").concat(e.value),l.a.createElement("button",{type:"submit",className:"btn btn-outline-danger btn-close",onClick:function(){return function(e){a((function(a){return Object(u.a)(Object(u.a)({},a),{},{filterByNumericValues:t.filterByNumericValues.filter((function(t,a){return a!==e}))})}));var n=t.filterByNumericValues.filter((function(t,a){return a===e}));c([].concat(Object(E.a)(r),[n[0].column]))}(n)}}," "))})))},j=function(){var e=Object(n.useContext)(f),t=e.data,a=e.planetasFiltrados;return l.a.createElement("div",null,0===t.length?l.a.createElement("div",null,"Carregando..."):l.a.createElement("table",{className:"table table-success table-striped table-hover"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Nome"),l.a.createElement("th",null,"Rota\xe7\xe3o"),l.a.createElement("th",null,"Orbita"),l.a.createElement("th",null,"Di\xe2metro"),l.a.createElement("th",null,"Clima"),l.a.createElement("th",null,"Gravidade"),l.a.createElement("th",null,"Terreno"),l.a.createElement("th",null,"\xc1gua da superf\xedcie"),l.a.createElement("th",null,"Popula\xe7\xe3o"),l.a.createElement("th",null,"Filmes"),l.a.createElement("th",null,"Data de cria\xe7\xe3o"),l.a.createElement("th",null,"Editado"),l.a.createElement("th",null,"URL"))),l.a.createElement("tbody",null,a.map((function(e,t){return l.a.createElement("tr",{key:t},l.a.createElement("td",null,e.name),l.a.createElement("td",null,e.rotation_period),l.a.createElement("td",null,e.orbital_period),l.a.createElement("td",null,e.diameter),l.a.createElement("td",null,e.climate),l.a.createElement("td",null,e.gravity),l.a.createElement("td",null,e.terrain),l.a.createElement("td",null,e.surface_water),l.a.createElement("td",null,e.population),l.a.createElement("td",null,e.films),l.a.createElement("td",null,e.created),l.a.createElement("td",null,e.edited),l.a.createElement("td",null,e.url))})))))},N=function(){return l.a.createElement(d,null,l.a.createElement("div",{className:"p-3 mb-2 bg-dark text-white "},l.a.createElement(b,null),l.a.createElement("div",{className:"d-flex justify-content-evenly  mb-3"},l.a.createElement(p,null),l.a.createElement(h,null)),l.a.createElement(v,null),l.a.createElement(j,null)))};c.a.render(l.a.createElement(N,null),document.getElementById("root"))}},[[10,1,2]]]);
//# sourceMappingURL=main.544dc024.chunk.js.map